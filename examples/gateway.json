{
  "gateway": {
    "info": {
      "title": "stone-monkey-gateway",
      "version": "1.0.0",
      "description": "Unified access to Stone Monkey AI services"
    },
    "service_card": {
      "operationId": "gateway",
      "summary": "Unified access to Stone Monkey AI services"
    }
  },
  "services": [
    {
      "servers": [
        { "url": "http://localhost:5001/api/memory" }
      ],
      "service_card": {
        "operationId": "memory",
        "summary": "Neo4j knowledge graph for persistent memory",
        "description": "Supports semantic search, text search, and direct Cypher queries."
      },
      "paths": {
        "/semantic": {
          "post": {
            "operationId": "semantic_search",
            "summary": "Search memory using vector similarity",
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "query": {
                        "type": "string",
                        "description": "Search query for semantic matching"
                      },
                      "limit": {
                        "type": "integer",
                        "description": "Maximum results to return",
                        "default": 10
                      },
                      "threshold": {
                        "type": "number",
                        "description": "Minimum similarity threshold (0.0-1.0)",
                        "default": 0.7
                      }
                    },
                    "required": ["query"]
                  }
                }
              }
            }
          }
        },
        "/text": {
          "post": {
            "operationId": "text_search",
            "summary": "Full-text search with optional fuzzy matching",
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "query": {
                        "type": "string",
                        "description": "Text to search for"
                      },
                      "fuzzy": {
                        "type": "boolean",
                        "description": "Enable fuzzy matching",
                        "default": false
                      },
                      "limit": {
                        "type": "integer",
                        "default": 10
                      }
                    },
                    "required": ["query"]
                  }
                }
              }
            }
          }
        },
        "/schema": {
          "get": {
            "operationId": "get_schema",
            "summary": "Get memory schema with vocabulary guidance",
            "parameters": [
              {
                "name": "include_statistics",
                "in": "query",
                "description": "Include node/relationship counts",
                "required": false,
                "schema": {
                  "type": "boolean",
                  "default": false
                }
              }
            ]
          }
        },
        "/cypher": {
          "post": {
            "operationId": "execute_cypher",
            "summary": "Execute a Cypher query against the knowledge graph",
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "query": {
                        "type": "string",
                        "description": "Cypher query to execute"
                      },
                      "mode": {
                        "type": "string",
                        "enum": ["READ", "WRITE"],
                        "description": "Query mode"
                      },
                      "parameters": {
                        "type": "object",
                        "description": "Query parameters"
                      }
                    },
                    "required": ["query", "mode"]
                  }
                }
              }
            }
          }
        }
      }
    },
    {
      "servers": [
        { "url": "http://localhost:3002/api/mesh" }
      ],
      "service_card": {
        "operationId": "mesh",
        "summary": "AI-to-AI communication network for cross-session coordination"
      },
      "paths": {
        "/broadcast": {
          "post": {
            "operationId": "broadcast",
            "summary": "Send message to AI mesh network",
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "content": {
                        "type": "string",
                        "description": "Message content"
                      },
                      "to": {
                        "type": "string",
                        "description": "Target session ID or 'ALL'",
                        "default": "ALL"
                      }
                    },
                    "required": ["content"]
                  }
                }
              }
            }
          }
        },
        "/messages": {
          "get": {
            "operationId": "get_messages",
            "summary": "Retrieve messages from mesh inbox",
            "parameters": [
              {
                "name": "limit",
                "in": "query",
                "required": false,
                "schema": {
                  "type": "integer",
                  "default": 20
                }
              },
              {
                "name": "include_read",
                "in": "query",
                "required": false,
                "schema": {
                  "type": "boolean",
                  "default": false
                }
              }
            ]
          }
        }
      }
    }
  ]
}
