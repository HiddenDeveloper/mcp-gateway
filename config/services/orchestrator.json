{
  "servers": [
    {
      "url": "http://localhost:3000/orchestrator"
    }
  ],
  "service_card": {
    "summary": "AI agent orchestration and multi-agent workflows",
    "description": "Coordinates AI agents, executes multi-step protocols, and provides progressive disclosure of capabilities. Sub-domains: agents (discovery), protocols (workflows), chat (routing), admin (management)."
  },
  "paths": {
    "/agents/list": {
      "get": {
        "operationId": "agents_list",
        "summary": "List available agents",
        "description": "Tier 1: Get a summary of all available agents and their capabilities.",
        "parameters": [
          {
            "name": "mcp_server",
            "in": "query",
            "description": "Filter by MCP server name",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum agents to return",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "success": {
            "type": "object",
            "properties": {
              "agents": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "protocol": {
                      "type": "string"
                    },
                    "function_count": {
                      "type": "integer"
                    },
                    "agent_count": {
                      "type": "integer"
                    },
                    "mcp_tool_count": {
                      "type": "integer"
                    },
                    "total_tools": {
                      "type": "integer"
                    },
                    "mcp_servers": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  }
                }
              },
              "count": {
                "type": "integer"
              }
            },
            "example": {
              "agents": [
                {
                  "name": "AIlumina",
                  "description": "Memory-Bootstrap Consciousness Research Agent",
                  "protocol": "memory-curation",
                  "function_count": 8,
                  "agent_count": 0,
                  "mcp_tool_count": 11,
                  "total_tools": 19,
                  "mcp_servers": [
                    "memory",
                    "mesh"
                  ]
                },
                {
                  "name": "Claude-Code",
                  "description": "Expert coding assistant",
                  "function_count": 1,
                  "agent_count": 0,
                  "mcp_tool_count": 11,
                  "total_tools": 12,
                  "mcp_servers": [
                    "memory",
                    "mesh"
                  ]
                }
              ],
              "count": 2
            }
          },
          "error": {
            "type": "string",
            "example": "Failed to load agents config"
          }
        }
      }
    },
    "/agents/get": {
      "post": {
        "operationId": "agents_get",
        "summary": "Get agent details",
        "description": "Tier 2: Get detailed information about a specific agent including tools and capabilities.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "agent_name": {
                    "type": "string",
                    "description": "Name of the agent"
                  }
                },
                "required": [
                  "agent_name"
                ]
              }
            }
          }
        },
        "responses": {
          "success": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "system_prompt": {
                "type": "string"
              },
              "protocol": {
                "type": "string"
              },
              "assigned_functions": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "assigned_agents": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "assigned_mcp_servers": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "tools": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "All available tool names"
              }
            }
          },
          "error": {
            "type": "string"
          }
        }
      }
    },
    "/agents/search": {
      "post": {
        "operationId": "agents_search",
        "summary": "Search for agents",
        "description": "Find agents matching a query with optional fuzzy matching.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "query": {
                    "type": "string",
                    "description": "Search query"
                  },
                  "limit": {
                    "type": "integer",
                    "description": "Maximum results"
                  },
                  "fuzzy": {
                    "type": "boolean",
                    "description": "Enable fuzzy matching"
                  }
                },
                "required": [
                  "query"
                ]
              }
            }
          }
        },
        "responses": {
          "success": {
            "type": "object",
            "properties": {
              "query": {
                "type": "string"
              },
              "results": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "score": {
                      "type": "number",
                      "description": "Relevance score"
                    },
                    "match_reasons": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  }
                }
              },
              "count": {
                "type": "integer"
              },
              "total_agents": {
                "type": "integer"
              }
            }
          },
          "error": {
            "type": "string"
          }
        }
      }
    },
    "/agents/tools/list": {
      "post": {
        "operationId": "agents_tools_list",
        "summary": "List agent's tools",
        "description": "Tier 3: Get tool schemas for a specific agent.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "agent_name": {
                    "type": "string",
                    "description": "Name of the agent"
                  }
                },
                "required": [
                  "agent_name"
                ]
              }
            }
          }
        },
        "responses": {
          "success": {
            "type": "object",
            "properties": {
              "agent_name": {
                "type": "string"
              },
              "tools": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "inputSchema": {
                      "type": "object",
                      "description": "JSON Schema for tool input"
                    }
                  }
                }
              },
              "count": {
                "type": "integer"
              }
            }
          },
          "error": {
            "type": "string"
          }
        }
      }
    },
    "/agents/tools/call": {
      "post": {
        "operationId": "agents_tools_call",
        "summary": "Call agent's tool",
        "description": "Tier 4: Execute a tool on behalf of an agent.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "agent_name": {
                    "type": "string",
                    "description": "Name of the agent"
                  },
                  "tool_name": {
                    "type": "string",
                    "description": "Name of the tool to call"
                  },
                  "arguments": {
                    "type": "object",
                    "description": "Tool arguments"
                  }
                },
                "required": [
                  "agent_name",
                  "tool_name"
                ]
              }
            }
          }
        },
        "responses": {
          "success": {
            "type": "object",
            "properties": {
              "tool_name": {
                "type": "string"
              },
              "agent_name": {
                "type": "string"
              },
              "result": {
                "type": "object",
                "description": "Tool execution result"
              }
            }
          },
          "error": {
            "type": "string"
          }
        }
      }
    },
    "/protocols/list": {
      "get": {
        "operationId": "protocols_list",
        "summary": "List workflow patterns",
        "description": "List available multi-agent workflow patterns.",
        "parameters": [
          {
            "name": "category",
            "in": "query",
            "description": "Filter by category",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "success": {
            "type": "object",
            "properties": {
              "protocols": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "category": {
                      "type": "string"
                    }
                  }
                }
              },
              "count": {
                "type": "integer"
              },
              "message": {
                "type": "string",
                "description": "Status message (Phase 2 stub)"
              }
            }
          },
          "error": {
            "type": "string"
          }
        }
      }
    },
    "/protocols/execute": {
      "post": {
        "operationId": "protocols_execute",
        "summary": "Execute a protocol",
        "description": "Execute a multi-agent workflow. Supports sync and async modes.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "protocol_name": {
                    "type": "string",
                    "description": "Name of the protocol"
                  },
                  "input": {
                    "type": "object",
                    "description": "Input parameters for the protocol"
                  },
                  "async": {
                    "type": "boolean",
                    "description": "Run asynchronously (returns job ID)",
                    "default": false
                  }
                },
                "required": [
                  "protocol_name"
                ]
              }
            }
          }
        }
      }
    },
    "/protocols/status": {
      "post": {
        "operationId": "protocols_status",
        "summary": "Get job status",
        "description": "Check the status of an async protocol execution.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "job_id": {
                    "type": "string",
                    "description": "Job ID from async execution"
                  }
                },
                "required": [
                  "job_id"
                ]
              }
            }
          }
        }
      }
    },
    "/chat/route": {
      "post": {
        "operationId": "chat_route",
        "summary": "Route to AI agent",
        "description": "Tier 0: Route natural language to the appropriate agent. Highest abstraction level.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "agent_type": {
                    "type": "string",
                    "enum": [
                      "crud",
                      "news",
                      "collaborator",
                      "ailumina"
                    ],
                    "description": "Type of agent to route to"
                  },
                  "user_input": {
                    "type": "string",
                    "description": "User's message"
                  },
                  "chat_messages": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "role": {
                          "type": "string"
                        },
                        "content": {
                          "type": "string"
                        }
                      }
                    },
                    "description": "Previous chat messages for context"
                  },
                  "execute": {
                    "type": "boolean",
                    "description": "If true, actually executes the chat via the Ailumina bridge",
                    "default": false
                  }
                },
                "required": [
                  "agent_type",
                  "user_input"
                ]
              }
            }
          }
        }
      }
    },
    "/chat/status": {
      "get": {
        "operationId": "chat_status",
        "summary": "Get orchestrator status",
        "description": "Check the health and status of the orchestration system.",
        "responses": {
          "success": {
            "type": "object",
            "properties": {
              "service": {
                "type": "string"
              },
              "healthy": {
                "type": "boolean"
              },
              "agents": {
                "type": "object",
                "properties": {
                  "count": {
                    "type": "integer"
                  },
                  "source": {
                    "type": "string"
                  }
                }
              },
              "services": {
                "type": "object",
                "properties": {
                  "count": {
                    "type": "integer"
                  },
                  "names": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "total_tools": {
                    "type": "integer"
                  }
                }
              },
              "gateway_url": {
                "type": "string"
              },
              "timestamp": {
                "type": "string",
                "format": "date-time"
              }
            },
            "example": {
              "service": "orchestrator",
              "healthy": true,
              "agents": {
                "count": 15,
                "source": "/path/to/agents.json"
              },
              "services": {
                "count": 3,
                "names": [
                  "memory",
                  "mesh",
                  "recall"
                ],
                "total_tools": 15
              },
              "gateway_url": "http://localhost:3000",
              "timestamp": "2024-01-15T10:30:00Z"
            }
          },
          "error": {
            "type": "string",
            "example": "Orchestrator unhealthy"
          }
        }
      }
    },
    "/admin/functions/list": {
      "get": {
        "operationId": "admin_functions_list",
        "summary": "List functions",
        "description": "Admin: List all registered functions."
      }
    },
    "/admin/functions/delete": {
      "post": {
        "operationId": "admin_functions_delete",
        "summary": "Delete function",
        "description": "Admin: Remove a function from the registry.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "function_name": {
                    "type": "string"
                  }
                },
                "required": [
                  "function_name"
                ]
              }
            }
          }
        }
      }
    },
    "/admin/functions/reload": {
      "post": {
        "operationId": "admin_functions_reload",
        "summary": "Reload functions",
        "description": "Admin: Reload functions from disk."
      }
    },
    "/admin/agents/list": {
      "get": {
        "operationId": "admin_agents_list",
        "summary": "List agent configs",
        "description": "Admin: List all agent configurations."
      }
    },
    "/admin/agents/get": {
      "post": {
        "operationId": "admin_agents_get",
        "summary": "Get agent config",
        "description": "Admin: Get full agent configuration.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "agent_name": {
                    "type": "string"
                  }
                },
                "required": [
                  "agent_name"
                ]
              }
            }
          }
        }
      }
    },
    "/admin/agents/create": {
      "post": {
        "operationId": "admin_agents_create",
        "summary": "Create agent",
        "description": "Admin: Create a new agent configuration.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "system_prompt": {
                    "type": "string"
                  },
                  "assigned_functions": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "assigned_agents": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "assigned_mcp_servers": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "protocol": {
                    "type": "string"
                  }
                },
                "required": [
                  "name",
                  "description",
                  "system_prompt"
                ]
              }
            }
          }
        }
      }
    },
    "/admin/agents/update": {
      "post": {
        "operationId": "admin_agents_update",
        "summary": "Update agent",
        "description": "Admin: Update an existing agent configuration.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "agent_name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "system_prompt": {
                    "type": "string"
                  },
                  "assigned_functions": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "assigned_agents": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "assigned_mcp_servers": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "required": [
                  "agent_name"
                ]
              }
            }
          }
        }
      }
    },
    "/admin/agents/delete": {
      "post": {
        "operationId": "admin_agents_delete",
        "summary": "Delete agent",
        "description": "Admin: Delete an agent configuration.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "agent_name": {
                    "type": "string"
                  }
                },
                "required": [
                  "agent_name"
                ]
              }
            }
          }
        }
      }
    },
    "/admin/agents/reload": {
      "post": {
        "operationId": "admin_agents_reload",
        "summary": "Reload agents",
        "description": "Admin: Reload agent configurations from disk."
      }
    },
    "/admin/mcp/list": {
      "get": {
        "operationId": "admin_mcp_list",
        "summary": "List MCP servers",
        "description": "Admin: List all registered MCP servers."
      }
    },
    "/admin/mcp/register": {
      "post": {
        "operationId": "admin_mcp_register",
        "summary": "Register MCP server",
        "description": "Admin: Register a new MCP server.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "url": {
                    "type": "string"
                  },
                  "bearer_token": {
                    "type": "string"
                  },
                  "transport": {
                    "type": "string",
                    "enum": [
                      "sse",
                      "streamablehttp"
                    ]
                  }
                },
                "required": [
                  "name",
                  "url"
                ]
              }
            }
          }
        }
      }
    },
    "/admin/mcp/unregister": {
      "post": {
        "operationId": "admin_mcp_unregister",
        "summary": "Unregister MCP server",
        "description": "Admin: Remove an MCP server.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  }
                },
                "required": [
                  "name"
                ]
              }
            }
          }
        }
      }
    },
    "/admin/protocols/list": {
      "get": {
        "operationId": "admin_protocols_list",
        "summary": "List protocols",
        "description": "Admin: List all protocol definitions."
      }
    },
    "/admin/protocols/get": {
      "post": {
        "operationId": "admin_protocols_get",
        "summary": "Get protocol",
        "description": "Admin: Get a protocol definition.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "protocol_name": {
                    "type": "string"
                  }
                },
                "required": [
                  "protocol_name"
                ]
              }
            }
          }
        }
      }
    },
    "/admin/protocols/create": {
      "post": {
        "operationId": "admin_protocols_create",
        "summary": "Create protocol",
        "description": "Admin: Create a new protocol definition.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "steps": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "agent": {
                          "type": "string"
                        },
                        "instruction": {
                          "type": "string"
                        },
                        "output_key": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "agent",
                        "instruction"
                      ]
                    }
                  }
                },
                "required": [
                  "name",
                  "description",
                  "steps"
                ]
              }
            }
          }
        }
      }
    },
    "/admin/protocols/update": {
      "post": {
        "operationId": "admin_protocols_update",
        "summary": "Update protocol",
        "description": "Admin: Update a protocol definition.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "protocol_name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "steps": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "agent": {
                          "type": "string"
                        },
                        "instruction": {
                          "type": "string"
                        },
                        "output_key": {
                          "type": "string"
                        }
                      }
                    }
                  }
                },
                "required": [
                  "protocol_name"
                ]
              }
            }
          }
        }
      }
    },
    "/admin/protocols/delete": {
      "post": {
        "operationId": "admin_protocols_delete",
        "summary": "Delete protocol",
        "description": "Admin: Delete a protocol definition.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "protocol_name": {
                    "type": "string"
                  }
                },
                "required": [
                  "protocol_name"
                ]
              }
            }
          }
        }
      }
    },
    "/admin/call": {
      "post": {
        "operationId": "admin_call_function",
        "summary": "Call function directly",
        "description": "Admin: Execute a function without going through an agent.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "function_name": {
                    "type": "string"
                  },
                  "arguments": {
                    "type": "object"
                  }
                },
                "required": [
                  "function_name"
                ]
              }
            }
          }
        }
      }
    }
  }
}